# å¯¼å…¥æˆåŠŸä½†åˆ—è¡¨æ— æ•°æ®é—®é¢˜è§£å†³æ–¹æ¡ˆ

## ğŸ¯ é—®é¢˜ç°è±¡
- âœ… æ‰¹é‡å¯¼å…¥æ˜¾ç¤ºï¼š"å¯¼å…¥å®Œæˆï¼æˆåŠŸ 5 æ¡ï¼Œå¤±è´¥ 0 æ¡"
- âŒ æ¯•ä¸šå»å‘åˆ—è¡¨ä¸­æ²¡æœ‰ä»»ä½•æ•°æ®
- âŒ åˆ·æ–°é¡µé¢åä»ç„¶ä¸ºç©º

## ğŸ” å¯èƒ½åŸå› åˆ†æ

### 1. æ•°æ®æœªçœŸæ­£æ’å…¥åˆ°è¡¨ä¸­
å¯¼å…¥æ˜¾ç¤ºæˆåŠŸï¼Œä½†å®é™…æ•°æ®åº“ä¸­æ— æ•°æ®

### 2. æ•°æ®æŸ¥è¯¢é—®é¢˜
- è¡¨å…³è”é”™è¯¯
- æŸ¥è¯¢æ¡ä»¶è¿‡æ»¤äº†æ‰€æœ‰æ•°æ®
- å­—æ®µåä¸åŒ¹é…

### 3. å‰ç«¯æ˜¾ç¤ºé—®é¢˜
- æ•°æ®åŠ è½½å¤±è´¥
- çŠ¶æ€æ›´æ–°å¼‚å¸¸
- ç¼“å­˜é—®é¢˜

## ğŸš€ è¯Šæ–­æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥æ•°æ®åº“å®é™…æ•°æ®
1. **ç™»å½• Supabase Dashboard**
2. **è¿›å…¥ SQL Editor**
3. **æ‰§è¡Œ** `check_import_data.sql` è„šæœ¬
4. **æŸ¥çœ‹è¾“å‡ºç»“æœ**

### ç¬¬äºŒæ­¥ï¼šå…³é”®æ£€æŸ¥ç‚¹

#### æ£€æŸ¥æ¯•ä¸šå»å‘è¡¨æ•°æ®
```sql
SELECT COUNT(*) as total_destinations FROM graduation_destinations;
```
- å¦‚æœç»“æœä¸º 0ï¼šæ•°æ®ç¡®å®æ²¡æœ‰æ’å…¥
- å¦‚æœç»“æœ > 0ï¼šæ•°æ®å­˜åœ¨ï¼Œå¯èƒ½æ˜¯æŸ¥è¯¢æˆ–æ˜¾ç¤ºé—®é¢˜

#### æ£€æŸ¥å¯¼å…¥æ‰¹æ¬¡è®°å½•
```sql
SELECT batch_name, total_records, success_count, failure_count, status 
FROM graduation_import_batches 
ORDER BY created_at DESC LIMIT 3;
```
- ç¡®è®¤æ‰¹æ¬¡è®°å½•æ˜¾ç¤ºæ­£ç¡®çš„æˆåŠŸæ•°é‡

#### æ£€æŸ¥å­¦ç”Ÿæ¡£æ¡ˆæ•°æ®
```sql
SELECT student_number, full_name, class_name 
FROM student_profiles 
WHERE student_number IN ('2021001', '2021002', '2021003');
```
- ç¡®è®¤å¯¼å…¥æ•°æ®å¯¹åº”çš„å­¦ç”Ÿå­˜åœ¨

### ç¬¬ä¸‰æ­¥ï¼šå‰ç«¯è°ƒè¯•

#### æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
2. æŸ¥çœ‹ Console æ ‡ç­¾
3. å¯»æ‰¾é”™è¯¯ä¿¡æ¯
4. æŸ¥çœ‹ Network æ ‡ç­¾ï¼Œç¡®è®¤APIè°ƒç”¨

#### æ‰‹åŠ¨åˆ·æ–°æ•°æ®
åœ¨æ¯•ä¸šå»å‘ç®¡ç†é¡µé¢ï¼ŒæŒ‰ F12 æ‰“å¼€æ§åˆ¶å°ï¼Œæ‰§è¡Œï¼š
```javascript
// æ‰‹åŠ¨è°ƒç”¨æ•°æ®åŠ è½½å‡½æ•°
location.reload();
```

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šæ•°æ®ç¡®å®æœªæ’å…¥
å¦‚æœæ•°æ®åº“ä¸­ç¡®å®æ²¡æœ‰æ•°æ®ï¼š

1. **æ£€æŸ¥å¯¼å…¥å‡½æ•°**
   - ç¡®è®¤ `simple_import_graduation_data` å‡½æ•°å­˜åœ¨
   - æ£€æŸ¥å‡½æ•°æ˜¯å¦æœ‰é”™è¯¯

2. **é‡æ–°æ‰§è¡Œå¯¼å…¥è„šæœ¬**
   ```sql
   -- é‡æ–°åˆ›å»ºå¯¼å…¥å‡½æ•°
   DROP FUNCTION IF EXISTS simple_import_graduation_data(TEXT, TEXT, TEXT, TEXT, NUMERIC, TEXT, TEXT, TEXT, TEXT, TEXT, TEXT, TEXT, TEXT);
   
   -- ä» fix_login_tables.sql ä¸­å¤åˆ¶å‡½æ•°å®šä¹‰å¹¶æ‰§è¡Œ
   ```

3. **æ‰‹åŠ¨æµ‹è¯•å¯¼å…¥**
   ```sql
   -- æ‰‹åŠ¨æµ‹è¯•å¯¼å…¥ä¸€æ¡æ•°æ®
   SELECT simple_import_graduation_data('2021001', 'employment', 'æµ‹è¯•å…¬å¸', 'æµ‹è¯•èŒä½', 10000) as result;
   ```

### æ–¹æ¡ˆäºŒï¼šæ•°æ®å­˜åœ¨ä½†æŸ¥è¯¢ä¸åˆ°
å¦‚æœæ•°æ®åº“ä¸­æœ‰æ•°æ®ä½†å‰ç«¯æŸ¥è¯¢ä¸åˆ°ï¼š

1. **æ£€æŸ¥è¡¨å…³è”**
   ```sql
   -- æ£€æŸ¥å­¦ç”ŸIDæ˜¯å¦æ­£ç¡®å…³è”
   SELECT gd.student_id, sp.student_number 
   FROM graduation_destinations gd
   LEFT JOIN student_profiles sp ON gd.student_id = sp.id
   WHERE sp.id IS NULL;
   ```

2. **ä¿®å¤æ•°æ®å…³è”**
   ```sql
   -- å¦‚æœæœ‰å…³è”é—®é¢˜ï¼Œä¿®å¤å­¦ç”ŸID
   UPDATE graduation_destinations gd
   SET student_id = sp.id
   FROM student_profiles sp
   WHERE gd.student_id IS NULL 
   AND sp.student_number = '2021001';  -- æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´
   ```

### æ–¹æ¡ˆä¸‰ï¼šå‰ç«¯æ˜¾ç¤ºé—®é¢˜
å¦‚æœæ•°æ®æ­£å¸¸ä½†å‰ç«¯ä¸æ˜¾ç¤ºï¼š

1. **å¼ºåˆ¶åˆ·æ–°**
   - Ctrl + F5 å¼ºåˆ¶åˆ·æ–°é¡µé¢
   - æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
   - å°è¯•æ— ç—•æ¨¡å¼

2. **æ£€æŸ¥ç­›é€‰æ¡ä»¶**
   - ç¡®ä¿æ‰€æœ‰ç­›é€‰æ¡ä»¶éƒ½å·²é‡ç½®
   - æœç´¢æ¡†ä¸ºç©º
   - çŠ¶æ€ç­›é€‰ä¸º"å…¨éƒ¨çŠ¶æ€"

3. **é‡æ–°åŠ è½½æ•°æ®**
   ```javascript
   // åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œ
   window.location.href = '/teacher-graduation-management';
   ```

## ğŸ¯ å¿«é€Ÿä¿®å¤è„šæœ¬

å¦‚æœé—®é¢˜ç´§æ€¥ï¼Œä½¿ç”¨ä»¥ä¸‹SQLç›´æ¥æ’å…¥æµ‹è¯•æ•°æ®ï¼š

```sql
-- ç›´æ¥æ’å…¥æµ‹è¯•æ•°æ®ï¼ˆä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼‰
INSERT INTO graduation_destinations (
    student_id,
    destination_type,
    company_name,
    position,
    salary,
    work_location,
    status,
    submit_time,
    created_at,
    updated_at
) VALUES 
((SELECT id FROM student_profiles WHERE student_number = '2021001'), 'employment', 'è…¾è®¯ç§‘æŠ€æœ‰é™å…¬å¸', 'å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ', 15000, 'æ·±åœ³å¸‚å—å±±åŒº', 'pending', NOW(), NOW(), NOW()),
((SELECT id FROM student_profiles WHERE student_number = '2021002'), 'employment', 'é˜¿é‡Œå·´å·´', 'Javaå¼€å‘å·¥ç¨‹å¸ˆ', 18000, 'æ­å·å¸‚ä½™æ­åŒº', 'pending', NOW(), NOW(), NOW()),
((SELECT id FROM student_profiles WHERE student_number = '2021003'), 'furtherstudy', 'æ¸…åå¤§å­¦', 'è®¡ç®—æœºåº”ç”¨æŠ€æœ¯', NULL, NULL, 'pending', NOW(), NOW(), NOW()),
((SELECT id FROM student_profiles WHERE student_number = '2021004'), 'abroad', 'ç¾å›½æ–¯å¦ç¦å¤§å­¦', 'äººå·¥æ™ºèƒ½', NULL, NULL, 'pending', NOW(), NOW(), NOW()),
((SELECT id FROM student_profiles WHERE student_number = '2021005'), 'entrepreneurship', 'åˆ›ä¸šç§‘æŠ€æœ‰é™å…¬å¸', 'åˆ›å§‹äººå…¼CEO', NULL, NULL, 'pending', NOW(), NOW(), NOW());

-- éªŒè¯æ’å…¥ç»“æœ
SELECT COUNT(*) as inserted_records FROM graduation_destinations;
```

## ğŸ“ æ•…éšœæ’é™¤æ£€æŸ¥æ¸…å•

æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥å¹¶è®°å½•ç»“æœï¼š

- [ ] `graduation_destinations` è¡¨æœ‰æ•°æ®
- [ ] `student_profiles` è¡¨æœ‰å¯¹åº”çš„å­¦ç”Ÿè®°å½•
- [ ] å¯¼å…¥æ‰¹æ¬¡è®°å½•æ˜¾ç¤ºæ­£ç¡®çš„æˆåŠŸæ•°é‡
- [ ] è¡¨ç»“æ„å­—æ®µåç§°æ­£ç¡®
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ— JavaScripté”™è¯¯
- [ ] ç½‘ç»œè¯·æ±‚æ­£å¸¸è¿”å›æ•°æ®
- [ ] é¡µé¢ç­›é€‰æ¡ä»¶å·²é‡ç½®

## ğŸ“ˆ é¢„æœŸç»“æœ

ä¿®å¤ååº”è¯¥çœ‹åˆ°ï¼š
- âœ… æ¯•ä¸šå»å‘åˆ—è¡¨æ˜¾ç¤ºå¯¼å…¥çš„5æ¡è®°å½•
- âœ… æ¯æ¡è®°å½•æ˜¾ç¤ºå­¦å·ã€å§“åã€å»å‘ç±»å‹ç­‰ä¿¡æ¯
- âœ… å¯ä»¥æ­£å¸¸è¿›è¡Œæœç´¢å’Œç­›é€‰
- âœ… å¯¼å…¥å†å²æ˜¾ç¤ºæ­£ç¡®çš„æ‰¹æ¬¡ä¿¡æ¯

---

**ç«‹å³æ‰§è¡Œ `check_import_data.sql` è„šæœ¬æ¥è¯Šæ–­å…·ä½“é—®é¢˜ï¼**